!function(d){function f(e,t,i){t=void 0===t?"/images/ajax-loader.gif":t,i=void 0!==i?i:"";return this.elem=e,this.image='<img class="gfspinner" src="'+t+'" style="'+i+'" />',this.init=function(){return this.spinner=jQuery(this.image),jQuery(this.elem).after(this.spinner),this},this.destroy=function(){jQuery(this.spinner).remove()},this.init()}window.GFChainedSelects=function(e,t,i,n){var c=this;c.formId=e,c.fieldId=t,c.hideInactive=i,c.alignment=n;n=d("#field_"+c.formId+"_"+c.fieldId);c.$selects=n.find("select"),c.$complete=n.find(".gf_chain_complete"),c.isDoingConditionalLogic=!1,c.init=function(){gform.addAction("gform_input_change",function(e,t,i){var n;-1!=c.$selects.index(e)&&(n=d(e).attr("name").split("_")[1],c.populateNextChoices(n,e.value,d(e)))},9),c.$selects.filter(function(){var e=d(this);return e.hasClass("gf_no_options")||e.find("option").length<=1}).toggleSelect(!0,c.hideInactive),gform.addFilter("gform_is_value_match",function(e,t,i){return c.isValueMatch(e,t,i)})},c.populateNextChoices=function(e,t,i){var s,a,n,l,o=c.getNextInputId(e),r=c.$selects.filter('[name="input_'+o+'"]');if(r.length<=0)return c.resetSelects(i,!0),void c.resizeSelects();c.resetSelects(i),t&&(c.hideInactive?s=new f(d('[name="input_'+e+'" ]'),gformChainedSelectData.spinner,"display:inline-block;vertical-align:middle;margin:-1px 0 0 6px;"):(a=d('<option value="">'+gformChainedSelectData.strings.loading+"...</option>"),n=2,l=setInterval(function(){a.text(gformChainedSelectData.strings.loading+new Array(n).join(".")),n=3<n?0:n+1},250),a.prependTo(r).prop("selected",!0),r.css({minWidth:r.width()}),a.text(gformChainedSelectData.strings.loading+".")),d.post(gformChainedSelectData.ajaxUrl,{action:"gform_get_next_chained_select_choices",input_id:e,form_id:c.formId,field_id:c.fieldId,value:c.getChainedSelectsValue(),nonce:gformChainedSelectData.nonce},function(e){var n,o,t;c.hideInactive?s.destroy():(clearInterval(l),a.remove()),e&&(t=d.parseJSON(e),n="",r.find("option:not(:first)").remove(),t.length<=0?c.resetSelects(i,!0):(o=!1,d.each(t,function(e,t){var i=t.isSelected?'selected="selected"':"";i&&(o=!0),n+='<option value="'+t.value+'"'+i+">"+t.text+"</option>"}),r.show().append(n),t[0].noOptions?(e=r.find("option:last-child").clone(),(t=r.parents("span").nextAll().find("select")).append(e),t.add(r).addClass("gf_no_options").find("option:last-child").prop("selected",!0)):(r.removeClass("gf_no_options").toggleSelect(!1,c),o&&r.change())),c.resizeSelects())}))},c.getChainedSelectsValue=function(){var t={};return c.$selects.each(function(){var e=d(this).attr("name").split("_")[1];t[e]=d(this).val()}),t},c.getNextInputId=function(e){var t=parseInt(e.split(".")[1])+1;return t%10==0&&t++,parseInt(e)+"."+t},c.resetSelects=function(e,t){e=c.$selects.index(e);c.$selects.filter(":gt("+e+")").toggleSelect(!0,c.hideInactive).find("option:not(:first)").remove().val("").change()},c.resizeSelects=function(){var e;"vertical"==c.alignment&&(c.$selects.width("auto"),e=0,c.$selects.each(function(){d(this).width()>e&&(e=d(this).width())}),c.$selects.width(e+"px"))},c.toggleCompleted=function(e){e?c.$complete.fadeIn():c.$complete.fadeOut()},c.isValueMatch=function(e,t,i){if(t!=c.formId||i.fieldId!=c.fieldId||c.isDoingConditionalLogic)return e;c.isDoingConditionalLogic=!0,i=d.extend({},i);for(var n=c.getChainedSelectsValue(),o=Object.keys(n).map(function(e){return n[e]}),s=i.value.split("/"),a=0;a<s.length;a++)"*"==s[a]&&(s[a]=o[a]);return s=s.join("/"),o=o.join("/"),e=gf_matches_operation(s,o,i.operator),c.isDoingConditionalLogic=!1,e},d.fn.toggleSelect=function(e,t){return this.prop("disabled",e),void 0!==t&&t&&(e?this.hide():this.show()),this},c.init()}}(jQuery);